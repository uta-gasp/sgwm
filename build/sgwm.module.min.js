module.exports=function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),o=e(1),a=e(4),u=e(6),f=e(7),l=e(10),c=e(2),s=e(9),h=e(5),g=e(11),p=function(){function t(n){r(this,t),this.logger=n}return i(t,[{key:"map",value:function(t){var n=t.fixations,e=t.words;if(n&&e){var r=new u(t.words);n=n.map(function(t,n){return Object.assign({id:n},t)});var i=new o(this.logger);n=i.filterByLocation(n,r.box),n=i.filterByDuration(n);var c=a(n,r.lineHeight,r.interlineDistance),s=new f(r.interlineDistance,this.logger),h=s.merge(c,r.lines),g=new l(this.logger);return g.map(h,r.lines),g.clean(n,r.words),{fixations:n,text:r}}}}],[{key:"FixationProcessorSettings",get:function(){return c}},{key:"ProgressionMergerSettings",get:function(){return s}},{key:"SplitToProgressionsSettings",get:function(){return h}},{key:"WordMapperSettings",get:function(){return g}}]),t}();t.exports=p},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function o(t,n){var e=t.duration+n.duration;return t.x=(t.x*t.duration+n.x*n.duration)/e,t.y=(t.y*t.duration+n.y*n.duration)/e,t.duration=e,t.merged=(t.merged||1)+(n.merged||1),s("joined",n.id,"to",t.id),t}function a(t,n,e){var r=n?i(t,n):Number.MAX_VALUE,a=e?i(t,e):Number.MAX_VALUE;return r<c.duration.mergingDistanceThreshold||a<c.duration.mergingDistanceThreshold?(a<r?o(e,t):o(n,t),!0):t.duration<c.duration.removingDurationThreshold&&(s("removed",t.id),!0)}function u(t){for(var n=[],e=void 0,r=void 0,i=0;i<t.length;i+=1){var o=t[i];e&&e.duration<c.duration.mergingDurationThreshold&&a(e,r,o)&&(n.pop(),e=r),n.push(o),r=e,e=o}return e.duration<c.duration.mergingDurationThreshold&&a(e,r,null)&&n.pop(),n}var f=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),l=e(2),c=new l,s=function(){},h=function(){function t(n){r(this,t),c.load(),n&&(n.log(". . . . . . . . ."),s=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];n.log.apply(n,["FixationProcessor   "].concat(e))})}return f(t,[{key:"filterByLocation",value:function(t,n){if(!c.location.enabled||!n)return t;for(var e=[],r=0;r<t.length;r+=1){var i=t[r];i.x>n.left-c.location.marginX&&i.x<n.right+c.location.marginX&&i.y>n.top-c.location.marginY&&i.y<n.bottom+c.location.marginY&&e.push(i)}return e}},{key:"filterByDuration",value:function(t){if(!c.duration.enabled)return t;var n=void 0,e=t;do n=e.length,e=u(e);while(e.length!==n);return e}}]),t}();t.exports=h},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=function t(n,e,r){null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,e);if(void 0===i){var o=Object.getPrototypeOf(n);return null===o?void 0:t(o,e,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},f=e(3),l=function(t){function n(){r(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"fixationProcessorSettings"));return t._location={enabled:!1,marginX:200,marginY:200},t._duration={enabled:!1,mergingDistanceThreshold:40,mergingDurationThreshold:100,removingDurationThreshold:80},u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"load",t).call(t),t}return o(n,t),a(n,[{key:"location",get:function(){return this._location},set:function(t){this._location=t}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration=t}}]),n}(f);t.exports=l},function(t,n){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=function(){function t(n){e(this,t),this._name=n,this._domain="sgwm",this._isInitialized=!1,this._fullPath=function(t){return[this._name,t].join("_")}}return r(t,[{key:"load",value:function(){var n=Object.keys(new t("")),e=JSON.parse(localStorage.getItem(this._domain));this._isInitialized=e&&e[this._name];for(var r in this)if(!(n.indexOf(r)>-1)){var i=e?e[this._fullPath(r)]:null;null!==i&&(this[r]=i)}}},{key:"save",value:function(){var n=Object.keys(new t("")),e=JSON.parse(localStorage.getItem(this._domain))||{};for(var r in this)n.indexOf(r)>-1||(e[this._fullPath(r)]=this[r]);localStorage.setItem(this._domain,JSON.stringify(e))}},{key:"isInitialized",get:function(){return this._isInitialized}}]),t}();t.exports=i},function(t,n,e){"use strict";var r=e(5),i=new r,o=void 0,a=function(t,n){return t>o.left&&t<o.right&&Math.abs(n)<o.vertical(t)};t.exports=function(t,n,e){i.load(),o=i.pixelBounds(n,e);var r=[],u=void 0,f=function(t){u=[t],r.push(u)},l=t[0];f(l);for(var c=1;c<t.length;c+=1){var s=t[c];a(s.x-l.x,s.y-l.y)?u.push(s):f(s),l=s}return r}},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=function t(n,e,r){null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,e);if(void 0===i){var o=Object.getPrototypeOf(n);return null===o?void 0:t(o,e,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},f=e(3),l=function(t){function n(){r(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"progressionSplitterSettings"));return t._bounds={left:-.5,right:10,verticalChar:1.5,verticalLine:.65},t._angle=Math.sin(15*Math.PI/180),u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"load",t).call(t),t}return o(n,t),a(n,[{key:"pixelBounds",value:function(t,n){var e=this,r=Math.min(this._bounds.verticalChar*t,this._bounds.verticalLine*n);return{left:this._bounds.left*t,right:this._bounds.right*t,vertical:function(t){return r+t*e._angle},_vertical:r}}},{key:"bounds",get:function(){return this._bounds},set:function(t){this._bounds=t}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t}},{key:"left",get:function(){return this._bounds.left},set:function(t){this._bounds.left=t}},{key:"right",get:function(){return this._bounds.right},set:function(t){this._bounds.right=t}},{key:"verticalLine",get:function(){return this._bounds.verticalLine},set:function(t){this._bounds.verticalLine=t}}]),n}(f);t.exports=l},function(t,n){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t){var n=9;if(t.length>1){for(var e=[],r=1;r<t.length;r+=1)e.push(t[r].y-t[r-1].y);n=i(e)}else n=Number.MAX_VALUE;return n}function i(t){if(t.length<=5)return t[Math.floor(t.length/2)];for(var n=Array(Math.floor(t.length/5)+(t.length%5?1:0)),e=0;e<n.length;e+=1)n[e]=[];for(var r=0;r<t.length;r+=1)n[Math.floor(r/5)].push(t[r]);var o=[];return n.forEach(function(t){t.sort(function(t,n){return t-n}),o.push(t[Math.floor(t.length/2)])}),i(o)}var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=function(){function t(n){e(this,t);for(var i=[],o=[],a={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:0,bottom:0},u=void 0,f=function(t){u=[t],u.id=void 0===t.row?i.length:t.row-1,u.y=t.y,i.push(u)},l=Number.MIN_VALUE,c=0;c<n.length;c+=1){var s=Object.assign({},n[c]);o.push(s),s.id=c,s.x<a.left&&(a.left=s.x),s.y<a.top&&(a.top=s.y),s.x+s.width>a.right&&(a.right=s.x+s.width),s.y+s.height>a.bottom&&(a.bottom=s.y+s.height),s.y!=l?(l=s.y,f(s)):u.push(s)}this._box=a,this._lines=i,this._words=o,this._lineHeight=i[0][0].height,this._interlineDistance=r(i)}return o(t,[{key:"box",get:function(){return this._box}},{key:"lines",get:function(){return this._lines}},{key:"words",get:function(){return this._words}},{key:"lineHeight",get:function(){return this._lineHeight}},{key:"interlineDistance",get:function(){return this._interlineDistance}}]),t}();t.exports=a},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n,e,r,i){for(var o=t,a=e===M.ANY&&r===M.ANY;o.length>n;){var u=f(o,e,r,i),l=c(o,u,a);if(!l)break;o=l}return o}function o(t,n,e){return!(n===M.LONG&&t.length<e)&&!(n===M.SHORT&&t.length>=e)}function a(t){for(var n=[],e=0;e<t.length;e+=1){var r=t[e];n.push([r.x,r.y])}return n}function u(t){for(var n=m.model("linear",a(t)),e=0,r=0;r<t.length;r+=1){var i=t[r],o=m.fit(n.equation,i.x);e+=(i.y-o)*(i.y-o)}return Math.sqrt(e/t.length)}function f(t,n,e,r){for(var i=[],a=0;a<t.length;a+=1){var f=t[a];if(o(f,n,r))for(var l=0;l<t.length;l+=1)if(a!==l){var c=t[l];if(o(c,e,r)){var s=f.concat(c);i.push({set1:a,set2:l,error:u(s)})}}}return i}function l(t,n,e,r){var i=r?Number.MAX_VALUE:w.maxLinearGradient,o=t[n],u=t[e],f=o.concat(u);f.joined=(o.joined||1)+(u.joined||1);var l=m.model("linear",a(f)),c=l.equation[1];if(Math.abs(c)<i){var s=Math.min(n,e),h=Math.max(n,e);return t.splice(h,1),t.splice(s,1),t.push(f),O("joined",n+" = "+o.map(function(t){return t.id})," & ",e+" = "+u.map(function(t){return t.id})),O("--->\n",t.map(function(t){return t.map(function(t){return t.id})})),!0}return!1}function c(t,n,e){var r=void 0,i=e?Number.MAX_VALUE:w.fitThreshold,o={};do{for(var a=Number.MAX_VALUE,u=-1,f=0;f<n.length;f+=1)if(!o[f]){var c=n[f];c.error<a&&(u=f,a=c.error)}if(u>=0&&a<i){var s=n[u],h=l(t,s.set1,s.set2,e);h?r=t:o[u]=!0}else r=null}while(void 0===r);return r}function s(t){for(var n=0,e=0;e<t.length;e+=1)n+=t[e].y;return n/t.length}function h(t){t.sort(function(t,n){return s(t)-s(n)}),t.forEach(function(t){t.sort(function(t,n){return t.ts-n.ts})})}function g(t,n){if(!t)return{min:0,max:0,range:0};var e=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return t.forEach(function(t){var i=n(t);e>i&&(e=i),r<i&&(r=i)}),{min:e,max:r,range:r-e}}function p(t,n){if(!w.intelligentFirstLineMapping||n.length<2)return 0;var e=g(t[0],function(t){return t.x}).range,r=[];n.forEach(function(t){r.push(g(t,function(t){return t.x}).range+t[t.length-1].width)});for(var i=0,o=r[i]/e,a=r[i]/r[i+1];a<.7&&o<(a+1)/2&&i<=r.length/2;)i++,o=r[i]/e,a=r[i]/r[i+1];return i}function v(t,n){h(t);for(var e=g(n,function(t){return t.id}),r=e.min,i=e.max,o=p(t,n),a=void 0,u=0;u<t.length;u+=1){var f=t[u],l=s(f),c=o;if(w.correctForEmptyLines&&u>0){for(var v=[],d=0;d<u;d+=1){var y=t[d];if(void 0!==y[0].line){var b=s(y);v.push(y[0].line+(l-b)/L)}}if(v.length){var _=v.reduce(function(t,n){return t+n},0)/v.length;_<o&&(_+=w.currentLineSupportInCorrection),o=Math.min(i,Math.max(r,Math.round(_)))}else o+=1}c!==o&&O("Line advanced: #"+c+" => "+o);for(var m=0;m<f.length;m+=1)f[m].line=o;a=l,o+=1}}function d(t,n){var e=t.reduce(function(t,n,e){return n.length<t.length?{index:e,length:t.length}:t},{index:-1,length:100});return e.index>=0&&e.length<n&&t.splice(e.index,1),t}function y(t,n){for(var e=[],r=0;r<t.length;r+=1){var i=t[r];i.length>=n?e.push(i):i.removed=!0}return e}function b(t,n,e){if(void 0===e)return y(t,n);for(var r=t;r.length>e;){var i=d(r,n);if(i.length===r.length)break;r=i}return r}var _=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),m=e(8),x=e(9),w=new x,M={LONG:1,SHORT:2,ANY:3},L=30,O=function(){},k=function(){function t(n,e){r(this,t),L=n,w.load(),w.fitThreshold*=L,e&&(e.log(". . . . . . . . ."),O=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,["ProgressionMerger   "].concat(n))})}return _(t,[{key:"merge",value:function(t,n){var e=n.length,r=t.map(function(t){return t});O("#0:",r.length,"\n",r.map(function(t){return t.map(function(t){return t.id})})),r=i(r,e,M.LONG,M.LONG,w.minLongSetLength),O("#1a:",r.length),r=i(r,e,M.SHORT,M.LONG,w.minLongSetLength),O("#1b:",r.length);var o=2;return r=i(r,e,M.SHORT,M.LONG,o),O("#1c:",r.length),r.length>e?(r=i(r,e,M.LONG,M.LONG,o),O("#2:",r.length)):w.removeSingleFixationLines&&(r=b(r,2)),r.length>e&&(r=b(r,w.minLongSetLength),O("#3a:",r.length),r=i(r,e,M.ANY,M.ANY),O("#3b:",r.length)),v(r,n),r}}]),t}();t.exports=k},function(t,n,e){"use strict";!function(){var n=function(t,n){var e=0,r=0,i=0,o=0,a=0,u=t.length-1,f=Array(n);for(e=0;e<u;e++){for(o=e,r=e+1;r<u;r++)Math.abs(t[e][r])>Math.abs(t[e][o])&&(o=r);for(i=e;i<u+1;i++)a=t[i][e],t[i][e]=t[i][o],t[i][o]=a;for(r=e+1;r<u;r++)for(i=u;i>=e;i--)t[i][r]-=t[i][e]*t[e][r]/t[e][e]}for(r=u-1;r>=0;r--){for(a=0,i=r+1;i<u;i++)a+=t[i][r]*f[i];f[r]=(t[u][r]-a)/t[r][r]}return f},e={linear:function(t){for(var n=[0,0,0,0,0],e=0,r=[];e<t.length;e++)null!=t[e][1]&&(n[0]+=t[e][0],n[1]+=t[e][1],n[2]+=t[e][0]*t[e][0],n[3]+=t[e][0]*t[e][1],n[4]+=t[e][1]*t[e][1]);for(var i=(e*n[3]-n[0]*n[1])/(e*n[2]-n[0]*n[0]),o=n[1]/e-i*n[0]/e,a=0,u=t.length;a<u;a++){var f=[t[a][0],t[a][0]*i+o];r.push(f)}var l="y = "+Math.round(100*i)/100+"x + "+Math.round(100*o)/100;return{equation:[o,i],points:r,string:l}},linearThroughOrigin:function(t){for(var n=[0,0],e=0,r=[];e<t.length;e++)null!=t[e][1]&&(n[0]+=t[e][0]*t[e][0],n[1]+=t[e][0]*t[e][1]);for(var i=n[1]/n[0],o=0,a=t.length;o<a;o++){var u=[t[o][0],t[o][0]*i];r.push(u)}var f="y = "+Math.round(100*i)/100+"x";return{equation:[0,i],points:r,string:f}},exponential:function(t){var n=[0,0,0,0,0,0],e=0,r=[];for(f=t.length;e<f;e++)null!=t[e][1]&&(n[0]+=t[e][0],n[1]+=t[e][1],n[2]+=t[e][0]*t[e][0]*t[e][1],n[3]+=t[e][1]*Math.log(t[e][1]),n[4]+=t[e][0]*t[e][1]*Math.log(t[e][1]),n[5]+=t[e][0]*t[e][1]);for(var i=n[1]*n[2]-n[5]*n[5],o=Math.pow(Math.E,(n[2]*n[3]-n[5]*n[4])/i),a=(n[1]*n[4]-n[5]*n[3])/i,u=0,f=t.length;u<f;u++){var l=[t[u][0],o*Math.pow(Math.E,a*t[u][0])];r.push(l)}var c="y = "+Math.round(100*o)/100+"e^("+Math.round(100*a)/100+"x)";return{equation:[o,a],points:r,string:c}},logarithmic:function(t){var n=[0,0,0,0],e=0,r=[];for(u=t.length;e<u;e++)null!=t[e][1]&&(n[0]+=Math.log(t[e][0]),n[1]+=t[e][1]*Math.log(t[e][0]),n[2]+=t[e][1],n[3]+=Math.pow(Math.log(t[e][0]),2));for(var i=(e*n[1]-n[2]*n[0])/(e*n[3]-n[0]*n[0]),o=(n[2]-i*n[0])/e,a=0,u=t.length;a<u;a++){var f=[t[a][0],o+i*Math.log(t[a][0])];r.push(f)}var l="y = "+Math.round(100*o)/100+" + "+Math.round(100*i)/100+" ln(x)";return{equation:[o,i],points:r,string:l}},power:function(t){var n=[0,0,0,0],e=0,r=[];for(u=t.length;e<u;e++)null!=t[e][1]&&(n[0]+=Math.log(t[e][0]),n[1]+=Math.log(t[e][1])*Math.log(t[e][0]),n[2]+=Math.log(t[e][1]),n[3]+=Math.pow(Math.log(t[e][0]),2));for(var i=(e*n[1]-n[2]*n[0])/(e*n[3]-n[0]*n[0]),o=Math.pow(Math.E,(n[2]-i*n[0])/e),a=0,u=t.length;a<u;a++){var f=[t[a][0],o*Math.pow(t[a][0],i)];r.push(f)}var l="y = "+Math.round(100*o)/100+"x^"+Math.round(100*i)/100;return{equation:[o,i],points:r,string:l}},polynomial:function(t,e){void 0===e&&(e=2);for(var r=[],i=[],o=[],a=0,u=0,f=0,l=e+1;f<l;f++){for(var c=0,s=t.length;c<s;c++)null!=t[c][1]&&(a+=Math.pow(t[c][0],f)*t[c][1]);r.push(a),a=0;for(var h=[],g=0;g<l;g++){for(var c=0,s=t.length;c<s;c++)null!=t[c][1]&&(u+=Math.pow(t[c][0],f+g));h.push(u),u=0}i.push(h)}i.push(r);for(var p=n(i,l),f=0,s=t.length;f<s;f++){for(var v=0,d=0;d<p.length;d++)v+=p[d]*Math.pow(t[f][0],d);o.push([t[f][0],v])}for(var y="y = ",f=p.length-1;f>=0;f--)y+=f>1?Math.round(p[f]*Math.pow(10,f))/Math.pow(10,f)+"x^"+f+" + ":1==f?Math.round(100*p[f])/100+"x + ":Math.round(100*p[f])/100;return{equation:p,points:o,string:y}},lastvalue:function t(n){for(var e=[],t=null,r=0;r<n.length;r++)n[r][1]?(t=n[r][1],e.push([n[r][0],n[r][1]])):e.push([n[r][0],t]);return{equation:[t],points:e,string:""+t}}},r={model:function(t,n,r){if("string"==typeof t)return e[t](n,r)},fit:function(t,n){var e=0,r=1;if(!t)return Number.MAX_VALUE;for(var i=0;i<t.length;++i)e+=t[i]*r,r*=n;return e}};t.exports=r}()},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=function t(n,e,r){null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,e);if(void 0===i){var o=Object.getPrototypeOf(n);return null===o?void 0:t(o,e,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},f=e(3),l=function(t){function n(){r(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"progressionMergerSettings"));return t._minLongSetLength=3,t._fitThreshold=.3,t._maxLinearGradient=.15,t._removeSingleFixationLines=!1,t._correctForEmptyLines=!0,t._currentLineSupportInCorrection=0,t._emptyLineDetectorFactor=1.7,t._intelligentFirstLineMapping=!1,u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"load",t).call(t),t}return o(n,t),a(n,[{key:"minLongSetLength",get:function(){return this._minLongSetLength},set:function(t){this._minLongSetLength=t}},{key:"fitThreshold",get:function(){return this._fitThreshold},set:function(t){this._fitThreshold=t}},{key:"maxLinearGradient",get:function(){return this._maxLinearGradient},set:function(t){this._maxLinearGradient=t}},{key:"removeSingleFixationLines",get:function(){return this._removeSingleFixationLines},set:function(t){this._removeSingleFixationLines=t}},{key:"correctForEmptyLines",get:function(){return this._correctForEmptyLines},set:function(t){this._correctForEmptyLines=t}},{key:"currentLineSupportInCorrection",get:function(){return this._currentLineSupportInCorrection},set:function(t){this._currentLineSupportInCorrection=t}},{key:"emptyLineDetectorFactor",get:function(){return this._emptyLineDetectorFactor},set:function(t){this._emptyLineDetectorFactor=t}},{key:"intelligentFirstLineMapping",get:function(){return this._intelligentFirstLineMapping},set:function(t){this._intelligentFirstLineMapping=t}}]),n}(f);t.exports=l},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){for(var e=void 0,r=0;r<t.length;r+=1)if(n===t[r].id){e=t[r];break}return e}function o(t){return t.text.length>2*_.wordCharSkipStart?t.x+Math.floor(_.wordCharSkipStart/t.text.length*t.width):t.x+Math.floor(t.width/2)}function a(t){return t.text.length>_.wordCharSkipStart+_.wordCharSkipEnd?t.x+Math.floor((t.text.length-_.wordCharSkipEnd)/t.text.length*t.width):t.x+Math.floor(t.width/2)}function u(t){for(var n=Number.MAX_VALUE,e=Number.MIN_VALUE,r=0;r<t.length;r+=1){var i=t[r];i.x<n?n=i.x:i.x>e&&(e=i.x)}return{leftMostX:n,rightMostX:e}}function f(t,n){var e=t/n,r=0;return e<_.scalingDiffLimit?(e=_.scalingDiffLimit,r=(e*n-t)/2):e>2-_.scalingDiffLimit&&(e=2-_.scalingDiffLimit,r=-(e*n-t)/2),{scale:e,newXCorrection:r}}function l(t,n){var e=n[0],r=n[n.length-1],i=e.x+e.width,l=r.x+r.width,c=u(t),s=c.leftMostX,h=c.rightMostX;if(m("rescaling..."),m("left: "+s+" "+i),m("right: "+h+" "+l),s<i||h>l){var g=s<i?o(n[0]):s,p=h>l?a(r):h,v=p-g,d=h-s,y=f(v,d),b=y.scale,_=y.newXCorrection;m("scale",b),g-=_,p+=_;for(var x=0;x<t.length;x+=1){var w=t[x];w._x=w.x,w.x=g+b*(w.x-s)}}}function c(t,n){for(var e=Number.MAX_VALUE,r=-1,i=0;i<n.length;i+=1){var o=n[i],a=o.fixations||o.text.length<=_.partialLengthMaxWordLength?_.effectiveLengthFactor*o.width:o.width;if(t.x>=o.x&&t.x<o.x+a){r=i,e=0;break}var u=Math.max(o.x-t.x,t.x-(o.x+a));u<e&&(e=u,r=i)}return r}function s(t,n){m("== mapping ==");for(var e=0;e<t.length;e+=1){var r=t[e],i=c(r,n);if(i<0)m(r.id+" => ---");else{var o=n[i];r.word={left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height,index:i,text:o.text,id:o.id},o.fixations?o.fixations.push(r):o.fixations=[r],m(r.id+" => "+o.id)}}}function h(t,n){for(var e=null;n>0;n-=1){var r=t[n];if(void 0!==r.line){e=r;break}}return e}function g(t,n,e){for(var r=null;n>0;n-=1){var i=t[n];if(void 0!==i.line){var o=h(t,n-1);if(!o){n=0;break}if(e<0?i.x<o.x:i.x>=o.x){r=i;break}}}return[r,n]}function p(t,n){return t.filter(function(t){return t.id!==n})}function v(t,n){for(var e=t.length-1;e;){var r=g(t,e,-1),i=d(r,2),o=i[0],a=i[1];if(!a)break;var u=g(t,a,1),f=d(u,2),l=f[0],c=f[1];if(e=c,l&&o.line!==l.line)for(var s=c+1;s<a;s+=1){var h=t[s];if(h.word){var v=n[h.word.id];1===v.fixations.length?(delete v.fixations,m("removed @ word #",v.id)):(v.fixations=p(v.fixations,h.id),m("one removed @ word #",v.id)),delete h.word,delete h.line,m("removed @ fix #",h.id)}}}}var d=function(){function t(t,n){var e=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),b=e(11),_=new b,m=function(){},x=function(){function t(n){r(this,t),_.load(),n&&(n.log(". . . . . . . . ."),m=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];n.log.apply(n,["WordMapper   "].concat(e))})}return y(t,[{key:"map",value:function(t,n){for(var e=0;e<t.length;e+=1){var r=t[e],o=r[0].line,a=i(n,o);void 0!==a&&(_.rescaleFixationX&&l(r,a),s(r,a))}}},{key:"clean",value:function(t,n){_.ignoreTransitions&&v(t,n)}}]),t}();t.exports=x},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function o(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=function t(n,e,r){null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,e);if(void 0===i){var o=Object.getPrototypeOf(n);return null===o?void 0:t(o,e,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},f=e(3),l=function(t){function n(){r(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"wordMapperSettings"));return t._wordCharSkipStart=3,t._wordCharSkipEnd=6,t._scalingDiffLimit=.9,t._rescaleFixationX=!0,t._partialLengthMaxWordLength=2,t._effectiveLengthFactor=.7,t._ignoreTransitions=!0,u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"load",t).call(t),t}return o(n,t),a(n,[{key:"wordCharSkipStart",get:function(){return this._wordCharSkipStart},set:function(t){this._wordCharSkipStart=t}},{key:"wordCharSkipEnd",get:function(){return this._wordCharSkipEnd},set:function(t){this._wordCharSkipEnd=t}},{key:"scalingDiffLimit",get:function(){return this._scalingDiffLimit},set:function(t){this._scalingDiffLimit=t}},{key:"rescaleFixationX",get:function(){return this._rescaleFixationX},set:function(t){this._rescaleFixationX=t}},{key:"partialLengthMaxWordLength",get:function(){return this._partialLengthMaxWordLength},set:function(t){this._partialLengthMaxWordLength=t}},{key:"effectiveLengthFactor",get:function(){return this._effectiveLengthFactor},set:function(t){this._effectiveLengthFactor=t}},{key:"ignoreTransitions",get:function(){return this._ignoreTransitions},set:function(t){this._ignoreTransitions=t}}]),n}(f);t.exports=l}]);