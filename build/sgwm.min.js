var SGWM=function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=e(1),a=e(4),u=e(6),f=e(7),l=e(10),c=e(2),s=e(9),h=e(5),g=e(11),p=function(){function t(n){r(this,t),this.logger=n}return o(t,[{key:"map",value:function(t){var n=t.fixations,e=t.words;if(n&&e){var r=new u(t.words);n=n.map(function(t,n){return Object.assign({id:n},t)});var o=new i(this.logger);n=o.filterByLocation(n,r.box),n=o.filterByDuration(n);var c=a(n,r.lineHeight,r.interlineDistance),s=new f(r.interlineDistance,this.logger),h=s.merge(c,r.lines),g=new l(this.logger);return g.map(h,r.lines),g.clean(n,r.words),{fixations:n,text:r}}}}],[{key:"FixationProcessorSettings",get:function(){return c}},{key:"ProgressionMergerSettings",get:function(){return s}},{key:"SplitToProgressionsSettings",get:function(){return h}},{key:"WordMapperSettings",get:function(){return g}}]),t}();t.exports=p},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function i(t,n){var e=t.duration+n.duration;return t.x=(t.x*t.duration+n.x*n.duration)/e,t.y=(t.y*t.duration+n.y*n.duration)/e,t.duration=e,t.merged=(t.merged||1)+(n.merged||1),s("joined",n.id,"to",t.id),t}function a(t,n,e){var r=n?o(t,n):Number.MAX_VALUE,a=e?o(t,e):Number.MAX_VALUE;return r<c.duration.mergingDistanceThreshold||a<c.duration.mergingDistanceThreshold?(a<r?i(e,t):i(n,t),!0):t.duration<c.duration.removingDurationThreshold&&(s("removed",t.id),!0)}function u(t){for(var n=[],e=void 0,r=void 0,o=0;o<t.length;o+=1){var i=t[o];e&&e.duration<c.duration.mergingDurationThreshold&&a(e,r,i)&&(n.pop(),e=r),n.push(i),r=e,e=i}return e.duration<c.duration.mergingDurationThreshold&&a(e,r,null)&&n.pop(),n}var f=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),l=e(2),c=new l,s=function(){},h=function(){function t(n){r(this,t),c.load(),n&&(n.log(". . . . . . . . ."),s=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];n.log.apply(n,["FixationProcessor   "].concat(e))})}return f(t,[{key:"filterByLocation",value:function(t,n){if(!c.location.enabled||!n)return t;for(var e=[],r=0;r<t.length;r+=1){var o=t[r];o.x>n.left-c.location.marginX&&o.x<n.right+c.location.marginX&&o.y>n.top-c.location.marginY&&o.y<n.bottom+c.location.marginY&&e.push(o)}return e}},{key:"filterByDuration",value:function(t){if(!c.duration.enabled)return t;var n=void 0,e=t;do n=e.length,e=u(e);while(e.length!==n);return e}}]),t}();t.exports=h},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=function t(n,e,r){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,e);if(void 0===o){var i=Object.getPrototypeOf(n);return null===i?void 0:t(i,e,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},f=e(3),l=function(t){function n(){r(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"fixationProcessorSettings"));return t._location={enabled:!1,marginX:200,marginY:200},t._duration={enabled:!1,mergingDistanceThreshold:40,mergingDurationThreshold:100,removingDurationThreshold:80},u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"load",t).call(t),t}return i(n,t),a(n,[{key:"location",get:function(){return this._location},set:function(t){this._location=t}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration=t}}]),n}(f);t.exports=l},function(t,n){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),o=function(){function t(n){e(this,t),this._name=n,this._domain="sgwm",this._isInitialized=!1,this._fullPath=function(t){return[this._name,t].join("_")}}return r(t,[{key:"load",value:function(){var n=Object.keys(new t("")),e=JSON.parse(localStorage.getItem(this._domain));this._isInitialized=e&&e[this._name];for(var r in this)if(!(n.indexOf(r)>-1)){var o=e?e[this._fullPath(r)]:null;null!==o&&(this[r]=o)}}},{key:"save",value:function(){var n=Object.keys(new t("")),e=JSON.parse(localStorage.getItem(this._domain))||{};for(var r in this)n.indexOf(r)>-1||(e[this._fullPath(r)]=this[r]);localStorage.setItem(this._domain,JSON.stringify(e))}},{key:"isInitialized",get:function(){return this._isInitialized}}]),t}();t.exports=o},function(t,n,e){"use strict";var r=e(5),o=new r,i=void 0,a=function(t,n){return t>i.left&&t<i.right&&Math.abs(n)<i.vertical(t)};t.exports=function(t,n,e){o.load(),i=o.pixelBounds(n,e);var r=[],u=void 0,f=function(t){u=[t],r.push(u)},l=t[0];f(l);for(var c=1;c<t.length;c+=1){var s=t[c];a(s.x-l.x,s.y-l.y)?u.push(s):f(s),l=s}return r}},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=function t(n,e,r){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,e);if(void 0===o){var i=Object.getPrototypeOf(n);return null===i?void 0:t(i,e,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},f=e(3),l=function(t){function n(){r(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"progressionSplitterSettings"));return t._bounds={left:-.5,right:10,verticalChar:1.5,verticalLine:.65},t._angle=Math.sin(15*Math.PI/180),u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"load",t).call(t),t}return i(n,t),a(n,[{key:"pixelBounds",value:function(t,n){var e=this,r=Math.min(this._bounds.verticalChar*t,this._bounds.verticalLine*n);return{left:this._bounds.left*t,right:this._bounds.right*t,vertical:function(t){return r+t*e._angle},_vertical:r}}},{key:"bounds",get:function(){return this._bounds},set:function(t){this._bounds=t}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t}}]),n}(f);t.exports=l},function(t,n){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t){var n=9;if(t.length>1){for(var e=[],r=1;r<t.length;r+=1)e.push(t[r].y-t[r-1].y);n=o(e)}else n=Number.MAX_VALUE;return n}function o(t){if(t.length<=5)return t[Math.floor(t.length/2)];for(var n=Array(Math.floor(t.length/5)+(t.length%5?1:0)),e=0;e<n.length;e+=1)n[e]=[];for(var r=0;r<t.length;r+=1)n[Math.floor(r/5)].push(t[r]);var i=[];return n.forEach(function(t){t.sort(function(t,n){return t-n}),i.push(t[Math.floor(t.length/2)])}),o(i)}var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=function(){function t(n){e(this,t);for(var o=[],i=[],a={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:0,bottom:0},u=void 0,f=function(t){u=[t],u.id=void 0===t.row?o.length:t.row-1,u.y=t.y,o.push(u)},l=Number.MIN_VALUE,c=0;c<n.length;c+=1){var s=Object.assign({},n[c]);i.push(s),s.id=c,s.x<a.left&&(a.left=s.x),s.y<a.top&&(a.top=s.y),s.x+s.width>a.right&&(a.right=s.x+s.width),s.y+s.height>a.bottom&&(a.bottom=s.y+s.height),s.y!=l?(l=s.y,f(s)):u.push(s)}this._box=a,this._lines=o,this._words=i,this._lineHeight=o[0][0].height,this._interlineDistance=r(o)}return i(t,[{key:"box",get:function(){return this._box}},{key:"lines",get:function(){return this._lines}},{key:"words",get:function(){return this._words}},{key:"lineHeight",get:function(){return this._lineHeight}},{key:"interlineDistance",get:function(){return this._interlineDistance}}]),t}();t.exports=a},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n,e,r,o){for(var i=t,a=e===_.ANY&&r===_.ANY;i.length>n;){var u=f(i,e,r,o),l=c(i,u,a);if(!l)break;i=l}return i}function i(t,n,e){return!(n===_.LONG&&t.length<e)&&!(n===_.SHORT&&t.length>=e)}function a(t){for(var n=[],e=0;e<t.length;e+=1){var r=t[e];n.push([r.x,r.y])}return n}function u(t){for(var n=d.model("linear",a(t)),e=0,r=0;r<t.length;r+=1){var o=t[r],i=d.fit(n.equation,o.x);e+=(o.y-i)*(o.y-i)}return Math.sqrt(e/t.length)}function f(t,n,e,r){for(var o=[],a=0;a<t.length;a+=1){var f=t[a];if(i(f,n,r))for(var l=0;l<t.length;l+=1)if(a!==l){var c=t[l];if(i(c,e,r)){var s=f.concat(c);o.push({set1:a,set2:l,error:u(s)})}}}return o}function l(t,n,e,r){var o=r?Number.MAX_VALUE:b.maxLinearGradient,i=t[n],u=t[e],f=i.concat(u);f.joined=(i.joined||1)+(u.joined||1);var l=d.model("linear",a(f)),c=l.equation[1];if(Math.abs(c)<o){var s=Math.min(n,e),h=Math.max(n,e);return t.splice(h,1),t.splice(s,1),t.push(f),x("joined",n+" = "+i.map(function(t){return t.id})," & ",e+" = "+u.map(function(t){return t.id})),x("--->\n",t.map(function(t){return t.map(function(t){return t.id})})),!0}return!1}function c(t,n,e){var r=void 0,o=e?Number.MAX_VALUE:b.fitThreshold,i={};do{for(var a=Number.MAX_VALUE,u=-1,f=0;f<n.length;f+=1)if(!i[f]){var c=n[f];c.error<a&&(u=f,a=c.error)}if(u>=0&&a<o){var s=n[u],h=l(t,s.set1,s.set2,e);h?r=t:i[u]=!0}else r=null}while(void 0===r);return r}function s(t){for(var n=0,e=0;e<t.length;e+=1)n+=t[e].y;return n/t.length}function h(t){t.sort(function(t,n){return s(t)-s(n)}),t.forEach(function(t){t.sort(function(t,n){return t.ts-n.ts})})}function g(t,n){h(t);var e=Number.MAX_VALUE,r=0;n.forEach(function(t){e>t.id&&(e=t.id),r<t.id&&(r=t.id)});for(var o=0,i=void 0,a=0;a<t.length;a+=1){var u=t[a],f=s(u),l=o;if(b.correctForEmptyLines&&a>0){for(var c=[],g=0;g<a;g+=1){var p=t[g];if(void 0!==p[0].line){var v=s(p);c.push(p[0].line+(f-v)/m)}}if(c.length){var d=c.reduce(function(t,n){return t+n},0)/c.length;o=Math.min(r,Math.max(e,Math.round(d)))}else o+=1}l!==o&&x("Line advanced: #"+l+" => "+o);for(var y=0;y<u.length;y+=1)u[y].line=o;i=f,o+=1}}function p(t,n){for(var e=[],r=0;r<t.length;r+=1){var o=t[r];o.length>=n?e.push(o):o.removed=!0}return e}var v=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),d=e(8),y=e(9),b=new y,_={LONG:1,SHORT:2,ANY:3},m=30,x=function(){},w=function(){function t(n,e){r(this,t),m=n,b.load(),b.fitThreshold*=m,e&&(e.log(". . . . . . . . ."),x=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e.log.apply(e,["ProgressionMerger   "].concat(n))})}return v(t,[{key:"merge",value:function(t,n){var e=n.length,r=t.map(function(t){return t});x("#0:",r.length,"\n",r.map(function(t){return t.map(function(t){return t.id})})),r=o(r,e,_.LONG,_.LONG,b.minLongSetLength),x("#1a:",r.length),r=o(r,e,_.SHORT,_.LONG,b.minLongSetLength),x("#1b:",r.length);var i=2;return r=o(r,e,_.SHORT,_.LONG,i),x("#1c:",r.length),r.length>e?(r=o(r,e,_.LONG,_.LONG,i),x("#2:",r.length)):b.removeSingleFixationLines&&(r=p(r,2)),r.length>e&&(r=p(r,b.minLongSetLength),x("#3a:",r.length),r=o(r,e,_.ANY,_.ANY),x("#3b:",r.length)),g(r,n),r}}]),t}();t.exports=w},function(t,n,e){"use strict";!function(){var n=function(t,n){var e=0,r=0,o=0,i=0,a=0,u=t.length-1,f=Array(n);for(e=0;e<u;e++){for(i=e,r=e+1;r<u;r++)Math.abs(t[e][r])>Math.abs(t[e][i])&&(i=r);for(o=e;o<u+1;o++)a=t[o][e],t[o][e]=t[o][i],t[o][i]=a;for(r=e+1;r<u;r++)for(o=u;o>=e;o--)t[o][r]-=t[o][e]*t[e][r]/t[e][e]}for(r=u-1;r>=0;r--){for(a=0,o=r+1;o<u;o++)a+=t[o][r]*f[o];f[r]=(t[u][r]-a)/t[r][r]}return f},e={linear:function(t){for(var n=[0,0,0,0,0],e=0,r=[];e<t.length;e++)null!=t[e][1]&&(n[0]+=t[e][0],n[1]+=t[e][1],n[2]+=t[e][0]*t[e][0],n[3]+=t[e][0]*t[e][1],n[4]+=t[e][1]*t[e][1]);for(var o=(e*n[3]-n[0]*n[1])/(e*n[2]-n[0]*n[0]),i=n[1]/e-o*n[0]/e,a=0,u=t.length;a<u;a++){var f=[t[a][0],t[a][0]*o+i];r.push(f)}var l="y = "+Math.round(100*o)/100+"x + "+Math.round(100*i)/100;return{equation:[i,o],points:r,string:l}},linearThroughOrigin:function(t){for(var n=[0,0],e=0,r=[];e<t.length;e++)null!=t[e][1]&&(n[0]+=t[e][0]*t[e][0],n[1]+=t[e][0]*t[e][1]);for(var o=n[1]/n[0],i=0,a=t.length;i<a;i++){var u=[t[i][0],t[i][0]*o];r.push(u)}var f="y = "+Math.round(100*o)/100+"x";return{equation:[0,o],points:r,string:f}},exponential:function(t){var n=[0,0,0,0,0,0],e=0,r=[];for(f=t.length;e<f;e++)null!=t[e][1]&&(n[0]+=t[e][0],n[1]+=t[e][1],n[2]+=t[e][0]*t[e][0]*t[e][1],n[3]+=t[e][1]*Math.log(t[e][1]),n[4]+=t[e][0]*t[e][1]*Math.log(t[e][1]),n[5]+=t[e][0]*t[e][1]);for(var o=n[1]*n[2]-n[5]*n[5],i=Math.pow(Math.E,(n[2]*n[3]-n[5]*n[4])/o),a=(n[1]*n[4]-n[5]*n[3])/o,u=0,f=t.length;u<f;u++){var l=[t[u][0],i*Math.pow(Math.E,a*t[u][0])];r.push(l)}var c="y = "+Math.round(100*i)/100+"e^("+Math.round(100*a)/100+"x)";return{equation:[i,a],points:r,string:c}},logarithmic:function(t){var n=[0,0,0,0],e=0,r=[];for(u=t.length;e<u;e++)null!=t[e][1]&&(n[0]+=Math.log(t[e][0]),n[1]+=t[e][1]*Math.log(t[e][0]),n[2]+=t[e][1],n[3]+=Math.pow(Math.log(t[e][0]),2));for(var o=(e*n[1]-n[2]*n[0])/(e*n[3]-n[0]*n[0]),i=(n[2]-o*n[0])/e,a=0,u=t.length;a<u;a++){var f=[t[a][0],i+o*Math.log(t[a][0])];r.push(f)}var l="y = "+Math.round(100*i)/100+" + "+Math.round(100*o)/100+" ln(x)";return{equation:[i,o],points:r,string:l}},power:function(t){var n=[0,0,0,0],e=0,r=[];for(u=t.length;e<u;e++)null!=t[e][1]&&(n[0]+=Math.log(t[e][0]),n[1]+=Math.log(t[e][1])*Math.log(t[e][0]),n[2]+=Math.log(t[e][1]),n[3]+=Math.pow(Math.log(t[e][0]),2));for(var o=(e*n[1]-n[2]*n[0])/(e*n[3]-n[0]*n[0]),i=Math.pow(Math.E,(n[2]-o*n[0])/e),a=0,u=t.length;a<u;a++){var f=[t[a][0],i*Math.pow(t[a][0],o)];r.push(f)}var l="y = "+Math.round(100*i)/100+"x^"+Math.round(100*o)/100;return{equation:[i,o],points:r,string:l}},polynomial:function(t,e){void 0===e&&(e=2);for(var r=[],o=[],i=[],a=0,u=0,f=0,l=e+1;f<l;f++){for(var c=0,s=t.length;c<s;c++)null!=t[c][1]&&(a+=Math.pow(t[c][0],f)*t[c][1]);r.push(a),a=0;for(var h=[],g=0;g<l;g++){for(var c=0,s=t.length;c<s;c++)null!=t[c][1]&&(u+=Math.pow(t[c][0],f+g));h.push(u),u=0}o.push(h)}o.push(r);for(var p=n(o,l),f=0,s=t.length;f<s;f++){for(var v=0,d=0;d<p.length;d++)v+=p[d]*Math.pow(t[f][0],d);i.push([t[f][0],v])}for(var y="y = ",f=p.length-1;f>=0;f--)y+=f>1?Math.round(p[f]*Math.pow(10,f))/Math.pow(10,f)+"x^"+f+" + ":1==f?Math.round(100*p[f])/100+"x + ":Math.round(100*p[f])/100;return{equation:p,points:i,string:y}},lastvalue:function t(n){for(var e=[],t=null,r=0;r<n.length;r++)n[r][1]?(t=n[r][1],e.push([n[r][0],n[r][1]])):e.push([n[r][0],t]);return{equation:[t],points:e,string:""+t}}},r={model:function(t,n,r){if("string"==typeof t)return e[t](n,r)},fit:function(t,n){var e=0,r=1;if(!t)return Number.MAX_VALUE;for(var o=0;o<t.length;++o)e+=t[o]*r,r*=n;return e}};t.exports=r}()},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=function t(n,e,r){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,e);if(void 0===o){var i=Object.getPrototypeOf(n);return null===i?void 0:t(i,e,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},f=e(3),l=function(t){function n(){r(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"progressionMergerSettings"));return t._minLongSetLength=3,t._fitThreshold=.3,t._maxLinearGradient=.15,t._removeSingleFixationLines=!1,t._correctForEmptyLines=!0,t._emptyLineDetectorFactor=1.7,u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"load",t).call(t),t}return i(n,t),a(n,[{key:"minLongSetLength",get:function(){return this._minLongSetLength},set:function(t){this._minLongSetLength=t}},{key:"fitThreshold",get:function(){return this._fitThreshold},set:function(t){this._fitThreshold=t}},{key:"maxLinearGradient",get:function(){return this._maxLinearGradient},set:function(t){this._maxLinearGradient=t}},{key:"removeSingleFixationLines",get:function(){return this._removeSingleFixationLines},set:function(t){this._removeSingleFixationLines=t}},{key:"correctForEmptyLines",get:function(){return this._correctForEmptyLines},set:function(t){this._correctForEmptyLines=t}},{key:"emptyLineDetectorFactor",get:function(){return this._emptyLineDetectorFactor},set:function(t){this._emptyLineDetectorFactor=t}}]),n}(f);t.exports=l},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){for(var e=void 0,r=0;r<t.length;r+=1)if(n===t[r].id){e=t[r];break}return e}function i(t){return t.text.length>2*_.wordCharSkipStart?t.x+Math.floor(_.wordCharSkipStart/t.text.length*t.width):t.x+Math.floor(t.width/2)}function a(t){return t.text.length>_.wordCharSkipStart+_.wordCharSkipEnd?t.x+Math.floor((t.text.length-_.wordCharSkipEnd)/t.text.length*t.width):t.x+Math.floor(t.width/2)}function u(t){for(var n=Number.MAX_VALUE,e=Number.MIN_VALUE,r=0;r<t.length;r+=1){var o=t[r];o.x<n?n=o.x:o.x>e&&(e=o.x)}return{leftMostX:n,rightMostX:e}}function f(t,n){var e=t/n,r=0;return e<_.scalingDiffLimit?(e=_.scalingDiffLimit,r=(e*n-t)/2):e>2-_.scalingDiffLimit&&(e=2-_.scalingDiffLimit,r=-(e*n-t)/2),{scale:e,newXCorrection:r}}function l(t,n){var e=n[0],r=n[n.length-1],o=e.x+e.width,l=r.x+r.width,c=u(t),s=c.leftMostX,h=c.rightMostX;if(m("rescaling..."),m("left: "+s+" "+o),m("right: "+h+" "+l),s<o||h>l){var g=s<o?i(n[0]):s,p=h>l?a(r):h,v=p-g,d=h-s,y=f(v,d),b=y.scale,_=y.newXCorrection;m("scale",b),g-=_,p+=_;for(var x=0;x<t.length;x+=1){var w=t[x];w._x=w.x,w.x=g+b*(w.x-s)}}}function c(t,n){for(var e=Number.MAX_VALUE,r=-1,o=0;o<n.length;o+=1){var i=n[o],a=i.fixations||i.text.length<=_.partialLengthMaxWordLength?_.effectiveLengthFactor*i.width:i.width;if(t.x>=i.x&&t.x<i.x+a){r=o,e=0;break}var u=Math.max(i.x-t.x,t.x-(i.x+a));u<e&&(e=u,r=o)}return r}function s(t,n){m("== mapping ==");for(var e=0;e<t.length;e+=1){var r=t[e],o=c(r,n);if(o<0)m(r.id+" => ---");else{var i=n[o];r.word={left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height,index:o,text:i.text,id:i.id},i.fixations?i.fixations.push(r):i.fixations=[r],m(r.id+" => "+i.id)}}}function h(t,n){for(var e=null;n>0;n-=1){var r=t[n];if(void 0!==r.line){e=r;break}}return e}function g(t,n,e){for(var r=null;n>0;n-=1){var o=t[n];if(void 0!==o.line){var i=h(t,n-1);if(!i){n=0;break}if(e<0?o.x<i.x:o.x>=i.x){r=o;break}}}return[r,n]}function p(t,n){return t.filter(function(t){return t.id!==n})}function v(t,n){for(var e=t.length-1;e;){var r=g(t,e,-1),o=d(r,2),i=o[0],a=o[1];if(!a)break;var u=g(t,a,1),f=d(u,2),l=f[0],c=f[1];if(e=c,l&&i.line!==l.line)for(var s=c+1;s<a;s+=1){var h=t[s];if(h.word){var v=n[h.word.id];1===v.fixations.length?(delete v.fixations,m("removed @ word #",v.id)):(v.fixations=p(v.fixations,h.id),m("one removed @ word #",v.id)),delete h.word,delete h.line,m("removed @ fix #",h.id)}}}}var d=function(){function t(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),b=e(11),_=new b,m=function(){},x=function(){function t(n){r(this,t),_.load(),n&&(n.log(". . . . . . . . ."),m=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];n.log.apply(n,["WordMapper   "].concat(e))})}return y(t,[{key:"map",value:function(t,n){for(var e=0;e<t.length;e+=1){var r=t[e],i=r[0].line,a=o(n,i);void 0!==a&&(_.rescaleFixationX&&l(r,a),s(r,a))}}},{key:"clean",value:function(t,n){_.ignoreTransitions&&v(t,n)}}]),t}();t.exports=x},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=function t(n,e,r){null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,e);if(void 0===o){var i=Object.getPrototypeOf(n);return null===i?void 0:t(i,e,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},f=e(3),l=function(t){function n(){r(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"wordMapperSettings"));return t._wordCharSkipStart=3,t._wordCharSkipEnd=6,t._scalingDiffLimit=.9,t._rescaleFixationX=!0,t._partialLengthMaxWordLength=2,t._effectiveLengthFactor=.7,t._ignoreTransitions=!0,u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"load",t).call(t),t}return i(n,t),a(n,[{key:"wordCharSkipStart",get:function(){return this._wordCharSkipStart},set:function(t){this._wordCharSkipStart=t}},{key:"wordCharSkipEnd",get:function(){return this._wordCharSkipEnd},set:function(t){this._wordCharSkipEnd=t}},{key:"scalingDiffLimit",get:function(){return this._scalingDiffLimit},set:function(t){this._scalingDiffLimit=t}},{key:"rescaleFixationX",get:function(){return this._rescaleFixationX},set:function(t){this._rescaleFixationX=t}},{key:"partialLengthMaxWordLength",get:function(){return this._partialLengthMaxWordLength},set:function(t){this._partialLengthMaxWordLength=t}},{key:"effectiveLengthFactor",get:function(){return this._effectiveLengthFactor},set:function(t){this._effectiveLengthFactor=t}},{key:"ignoreTransitions",get:function(){return this._ignoreTransitions},set:function(t){this._ignoreTransitions=t}}]),n}(f);t.exports=l}]);